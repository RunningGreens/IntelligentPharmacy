<%--  Created by IntelliJ IDEA.  User: Administrator  Date: 2018/9/15 0015  Time: 下午 2:50  To change this template use File | Settings | File Templates.--%><%@ page contentType="text/html;charset=UTF-8" language="java" %><%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"   %><script src="${pageContext.request.contextPath}/js/jquery.min.js"></script><html><head>    <title>药品请领页面</title>    <link rel="stylesheet" href="${pageContext.request.contextPath}/css/x-admin.css" media="all">    <link rel="stylesheet" href="${pageContext.request.contextPath}/css/pag.css" media="all"></head><body background="/imag/tupian3.jpg"><h1 align="center" style="font-size: 40px;color: #5747ff;">药品请领单</h1><form  action="${pageContext.request.contextPath}/phamacy/selectPharmacyClassification" method="post">    药品分类：<select  name="drugClassifications" id="drugClassifications" >    <option value="">请选择</option>   <c:forEach items="${drugClassification}" var="drugClassifications">       <option value="${drugClassifications.drugClassificationId}" id="drugClassification" }>${drugClassifications.drugClassificationName}</option>   </c:forEach></form><form  align="center" id="recevieDrug" action="${pageContext.request.contextPath}/phamacy/addRecevieDrug.action"><table align="center" class="tablelist" >    <thead>    <tr>        <th><input onclick="selectAll()" type="checkbox" name="controlAll" style="" id="controlAll">        </th>        <th> 药品品名 </th>        <th> 剂型</th>        <th> 规格</th>        <th> 单位</th>        <th> 药品价格 </th>        <th> 批准文号 </th>        <th> 生产厂商 </th>        <th> 请领数量 </th>    </tr>    </thead>        <tbody id="pharmacyDrugTable">        </tbody>         </table>    <input type="submit" name="subscribe" value="提 交" style="background-color: #3950ff;width: 200px;height: 28px"></form></body></html><script src="${pageContext.request.contextPath}/lib/layui/layui.js" charset="utf-8"></script><script src="${pageContext.request.contextPath}/js/x-layui.js" charset="utf-8"></script><script src="${pageContext.request.contextPath}/js/jquery2.js" charset="utf-8"></script><script src="${pageContext.request.contextPath}/js/js.js" charset="utf-8"></script><script>    $("#drugClassifications").change(function () {        var drugClassificationId = document.getElementById("drugClassifications").value;        console.log(drugClassificationId);        $.post("${pageContext.request.contextPath}/phamacy/selectPharmacyClassificationPhamacyDrugDetils.action",            {"drugClassificationId":drugClassificationId},            function (res) {                var pharmacyDrugTable = $("#pharmacyDrugTable");                for (var i = 0; i < res.length; i++) {                    pharmacyDrugTable.append($(`<tr>                      <td><input type="checkbox" value="\${res[i].pharmacyId}" name="selected"></td>                    <td>\${res[i].drugName}</td>                    <td>\${res[i].formulation}</td>                    <td>\${res[i].norm}</td>                    <td>\${res[i].unit}</td>                    <td>\${res[i].drugPrice}</td>                    <td>\${res[i].approvalnumber}</td>                    <td>\${res[i].manufacturer}</td>                    <td><input type="text"  name="drugQuantity"></td></tr>`));                }            }, "json");    });    $("#drugDetails").change(function () {        var pharmacyId = document.getElementById("drugDetails").value;        console.log(pharmacyId);        $.post("${pageContext.request.contextPath}/phamacy/selectPhamacyDrugDetils.action",            {"pharmacyId":pharmacyId},            function (res) {                var pharmacyDrugTable = $("#pharmacyDrugTable");                var recevieDrug = $("#recevieDrug");                pharmacyDrugTable.append($(`<tr><td>药品品名</td>  <td>\${res.drugName}</td></tr>`));                pharmacyDrugTable.append($(`<tr><td>剂型</td>  <td>\${res.formulation}</td></tr>`));                pharmacyDrugTable.append($(`<tr><td>规格</td>  <td>\${res.norm}</td></tr>`));                pharmacyDrugTable.append($(`<tr><td>单位</td>  <td>\${res.unit}</td></tr>`));                pharmacyDrugTable.append($(`<tr><td>药品价格</td>  <td>\${res.drugPrice}</td></tr>`));                pharmacyDrugTable.append($(`<tr><td>批注文号</td>  <td>\${res.approvalnumber}</td></tr>`));                pharmacyDrugTable.append($(`<tr><td>生产厂商</td>  <td>\${res.manufacturer}</td></tr>`));                recevieDrug.append("<input type=\"hidden\" name=\"pharmacyId\" value="+res.pharmacyId+">");            }, "json");    });    function selDate() {        var couId = document.getElementById("couId").value;        var counselorDate = document.getElementById("orderDate1").value;        window.location.href="${pageContext.request.contextPath}/servlet/foreUserServlet?login=selCounselorDate&counselorDate="+counselorDate;    }</script>